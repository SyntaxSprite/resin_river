{% extends "base.html" %}
{% load static %}

{% block title %}{% if form_type == 'add' %}Add Address{% else %}Edit Address{% endif %} - Resin River{% endblock title %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="mb-8">
        <a href="{% url 'saved-addresses' %}" class="text-blue-600 hover:text-blue-800 mb-4 inline-block">
            ‚Üê Back to Saved Addresses
        </a>
        <h1 class="text-3xl md:text-4xl font-bold text-black mb-2">
            {% if form_type == 'add' %}Add New Address{% else %}Edit Address{% endif %}
        </h1>
        <p class="text-gray-600">Save this address for faster checkout</p>
    </div>
    
    <div class="bg-white border border-gray-200 rounded-lg p-6 md:p-8">
        <form method="post" action="{% if form_type == 'add' %}{% url 'saved-address-add' %}{% else %}{% url 'saved-address-edit' address.id %}{% endif %}" class="space-y-6">
            {% csrf_token %}
            
            <!-- Label and Type -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="label" class="block text-sm font-medium text-gray-700 mb-1">Address Label *</label>
                    <input type="text" id="label" name="label" value="{% if address %}{{ address.label }}{% endif %}" 
                        placeholder="e.g., My Home, Office" required
                        class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black">
                </div>
                <div>
                    <label for="address_type" class="block text-sm font-medium text-gray-700 mb-1">Address Type</label>
                    <select id="address_type" name="address_type" 
                        class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black">
                        <option value="home" {% if address and address.address_type == 'home' %}selected{% endif %}>Home</option>
                        <option value="work" {% if address and address.address_type == 'work' %}selected{% endif %}>Work</option>
                        <option value="other" {% if address and address.address_type == 'other' %}selected{% endif %}>Other</option>
                    </select>
                </div>
            </div>
            
            <!-- Name -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="first_name" class="block text-sm font-medium text-gray-700 mb-1">First Name *</label>
                    <input type="text" id="first_name" name="first_name" value="{% if address %}{{ address.first_name }}{% endif %}" required
                        class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black">
                </div>
                <div>
                    <label for="last_name" class="block text-sm font-medium text-gray-700 mb-1">Last Name *</label>
                    <input type="text" id="last_name" name="last_name" value="{% if address %}{{ address.last_name }}{% endif %}" required
                        class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black">
                </div>
            </div>
            
            <!-- Address -->
            <div>
                <label for="address" class="block text-sm font-medium text-gray-700 mb-1">Street Address *</label>
                <input type="text" id="address" name="address" value="{% if address %}{{ address.address }}{% endif %}" required
                    class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black">
            </div>
            
            <!-- City, State, Postal Code -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label for="city" class="block text-sm font-medium text-gray-700 mb-1">City *</label>
                    <input type="text" id="city" name="city" value="{% if address %}{{ address.city }}{% endif %}" required
                        class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black">
                </div>
                <div>
                    <label for="state" class="block text-sm font-medium text-gray-700 mb-1">State/Province *</label>
                    <input type="text" id="state" name="state" value="{% if address %}{{ address.state }}{% endif %}" required
                        class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black">
                </div>
                <div>
                    <label for="postal_code" class="block text-sm font-medium text-gray-700 mb-1">Postal Code</label>
                    <input type="text" id="postal_code" name="postal_code" value="{% if address %}{{ address.postal_code }}{% endif %}"
                        class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black">
                </div>
            </div>
            
            <!-- Country and Phone -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="country" class="block text-sm font-medium text-gray-700 mb-1">Country *</label>
                    <input type="text" id="country" name="country" value="{% if address %}{{ address.country }}{% endif %}" required
                        class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black">
                </div>
                <div>
                    <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone Number *</label>
                    <input type="tel" id="phone" name="phone" value="{% if address %}{{ address.phone }}{% endif %}" required
                        class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-black">
                </div>
            </div>
            
            <!-- Default Address -->
            <div>
                <label class="flex items-center gap-2">
                    <input type="checkbox" name="is_default" {% if address and address.is_default %}checked{% endif %} 
                        class="w-4 h-4 border-gray-300 rounded focus:ring-2 focus:ring-black">
                    <span class="text-sm text-gray-700">Set as default address</span>
                </label>
            </div>
            
            <!-- Buttons -->
            <div class="flex gap-4 pt-4">
                <button type="submit" class="px-6 py-3 bg-black text-white font-semibold rounded-lg hover:bg-gray-900 transition-colors">
                    {% if form_type == 'add' %}Save Address{% else %}Update Address{% endif %}
                </button>
                <a href="{% url 'saved-addresses' %}" class="px-6 py-3 bg-gray-200 text-black font-semibold rounded-lg hover:bg-gray-300 transition-colors">
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock content %}

